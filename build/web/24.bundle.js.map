{"version":3,"sources":["webpack:///./src/common/modules/auth/service/api.tsx","webpack:///./src/common/modules/auth/utilities/index.tsx","webpack:///./src/common/modules/auth/store/actions/actions.tsx","webpack:///./src/common/modules/auth/components/signin.component.styles.css?3ab1","webpack:///./sources/img/perfect-leo-logo.png","webpack:///./src/common/modules/auth/components/signin.component.tsx","webpack:///./src/common/modules/auth/components/signin-container.component.tsx"],"names":["clientApi","axios_default","a","create","baseURL","window","location","origin","setAuthToken","token","defaults","headers","common","actions_signIn","user","Object","asyncActions","types","post","signIn","then","response","data","localStorage","setItem","logout","removeItem","type","__webpack_require__","d","__webpack_exports__","module","exports","Signin","Signin__container","Signin__logo","Signin__form","Form","Form__form","Form__group","Form__error","Form__label","Form__control","Form__btn","p","signin_component","_a","taskStatuses","auth","react","react_router","to","authStatus","lodash","className","signin_component_styles","src","react_form_es","onSubmit","formApi","FAILED","submitForm","name","field","es","state","reducers","dispatch","ownProps","actions"],"mappings":"iHAGMA,EAAYC,EAAAC,EAAMC,OAAO,CAC3BC,QAASC,OAAOC,SAASC,qBCDtB,SAASC,EAAaC,GACrBA,EACAR,EAAAC,EAAMQ,SAASC,QAAQC,OAAsB,cAAI,OAAOH,SAEjDR,EAAAC,EAAMQ,SAASC,QAAQC,OAAsB,0BCCrD,SAASC,EAAOC,GACnB,OAAOC,OAAAC,EAAA,EAAAD,CACHE,EAAA,EFCD,SAAgBH,GACnB,OAAOd,EAAUkB,KAAK,oBAAqBJ,GEDvCK,CAAWL,GACNM,KAAK,SAAAC,GACK,IAAAZ,EAAAY,EAAAC,KAAAb,MAGP,OAFAc,aAAaC,QAAQ,WAAYf,GACjCD,EAAaC,GACNY,EAASC,QAKzB,SAASG,IAGZ,OAFAF,aAAaG,WAAW,QACxBlB,IACO,CACHmB,KAAMV,EAAA,GAzBdW,EAAAC,EAAAC,EAAA,sBAAAjB,IAAAe,EAAAC,EAAAC,EAAA,sBAAAL,yBCCAM,EAAAC,QAAA,CAAkBC,OAAA,iBAAAC,kBAAA,4BAAAC,aAAA,uBAAAC,aAAA,uBAAAC,KAAA,eAAAC,WAAA,qBAAAC,YAAA,sBAAAC,YAAA,sBAAAC,YAAA,sBAAAC,cAAA,wBAAAC,UAAA,0CCDlBZ,EAAAC,QAAiBJ,EAAAgB,EAAuB,iJC8DzBC,EA9CS,SAACC,OAAC3B,EAAA2B,EAAA3B,OAAQ4B,EAAAD,EAAAC,aAE9B,GAF4CD,EAAAE,KAGxC,OAAOC,EAAA,cAACC,EAAA,EAAQ,CAACC,GAAI,WAEzB,IAEMC,EAAaC,EAAA,IAAMN,EAAgB9B,EAAA,EAAW,WACpD,OACIgC,EAAA,qBAAKK,UAAWC,EAAA,QACZN,EAAA,qBAAKK,UAAWC,EAAA,mBACZN,EAAA,qBAAKK,UAAWC,EAAA,cACZN,EAAA,qBAAKO,IAAK5B,EAAQ,QAEtBqB,EAAA,cAACQ,EAAA,KAAI,CAACC,SATD,SAAC5C,GAAmC,OAAAK,EAAOL,KAU3C,SAAC6C,GAAqB,OACnBV,EAAA,qBAAKK,UAAWC,EAAA,MACXH,IAAepC,EAAA,EAAkB4C,QAC9BX,EAAA,qBAAKK,UAAWC,EAAA,aAAkB,sBAI1CN,EAAA,sBAAMS,SAAUC,EAAQE,WAAYP,UAAWC,EAAA,YAC3CN,EAAA,qBAAKK,UAAWC,EAAA,aACZN,EAAA,uBAAOK,UAAWC,EAAA,aAAkB,SACpCN,EAAA,cAACQ,EAAA,KAAI,CAACH,UAAWC,EAAA,cACXO,KAAK,aACLC,MAAM,gBAEhBd,EAAA,qBAAKK,UAAWC,EAAA,aACZN,EAAA,uBAAOK,UAAWC,EAAA,aAAkB,UACpCN,EAAA,cAACQ,EAAA,KAAI,CAACH,UAAWC,EAAA,cACXO,KAAK,WACLC,MAAM,WACNpC,KAAK,cAEfsB,EAAA,wBAAQK,UAAWC,EAAA,WAAgB,8BC5BhDzB,EAAA,QAAAf,OAAAmC,EAAA,GAAgBnC,OAAAiD,EAAA,EAAAjD,CAVP,SAACkD,GAAe,OACpClB,aAAcmB,EAAA,EAA+BD,GAC7CjB,KAAMkB,EAAA,EAAkBD,KAGD,SAACE,EAAeC,GAAgC,OACvEjD,OAAQ,SAACL,GACL,OAAAqD,EAASpD,OAAAsD,EAAA,EAAAtD,CAAOD,OAGOC,CAA6C8B","file":"24.bundle.js","sourcesContent":["import axios from 'axios';\nimport {UserAuthenticationFields} from '../schema/models';\n\nconst clientApi = axios.create({\n    baseURL: window.location.origin\n});\n\nexport interface SignInResponse {\n    data: { token: string }\n}\n\nexport function signIn(user: UserAuthenticationFields): Promise<SignInResponse> {\n    return clientApi.post(`/api/users/signin`, user);\n}\n\n","import axios from 'axios';\n\n\nexport function setAuthToken(token?: string) {\n    if (token) {\n        axios.defaults.headers.common['Authorization'] = `JWT ${token}`;\n    } else {\n        delete axios.defaults.headers.common['Authorization'];\n    }\n}\n","import * as api from '../../service/api';\nimport {asyncActionCreator} from '../../../../../utilities/asyncActions';\nimport {setAuthToken} from '../../utilities';\nimport {UserAuthenticationFields} from '../../schema/models';\nimport {SIGNIN_USER, LOGOUT_USER} from './types';\n\n\n\nexport function signIn(user: UserAuthenticationFields) {\n    return asyncActionCreator<typeof SIGNIN_USER, {token: string}, any>(\n        SIGNIN_USER,\n        api.signIn(user)\n            .then(response => {\n                const {token} = response.data;\n                localStorage.setItem('jwtToken', token);\n                setAuthToken(token);\n                return response.data;\n            })\n    );\n}\n\nexport function logout() {\n    localStorage.removeItem('auth');\n    setAuthToken();\n    return {\n        type: LOGOUT_USER\n    };\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Signin\":\"Signin___3qNo_\",\"Signin__container\":\"Signin__container___rNXok\",\"Signin__logo\":\"Signin__logo___2bWCH\",\"Signin__form\":\"Signin__form___1GVhF\",\"Form\":\"Form___2559Q\",\"Form__form\":\"Form__form___3F3r9\",\"Form__group\":\"Form__group___1F4e5\",\"Form__error\":\"Form__error___3j9cu\",\"Form__label\":\"Form__label___1Z4Gj\",\"Form__control\":\"Form__control___2Y0jG\",\"Form__btn\":\"Form__btn___XQZO0\"};","module.exports = __webpack_public_path__ + \"img/perfect-leo-logo.png\";","import * as React from 'react';\nimport {Redirect} from 'react-router-dom';\nimport * as _ from 'lodash';\nimport {Form, FormApi, Text} from 'react-form';\nimport {UserAuthenticationFields} from '../schema/models';\nimport {signIn} from '../store/actions/actions';\nimport {History} from 'history';\nimport * as styles from './signin.component.styles.css';\nimport {SIGNIN_USER} from '../store/actions/types'\nimport {AsyncActionStatus} from '../../../../utilities/asyncActions'\ninterface SignInComponentProps {\n    signIn: (user: UserAuthenticationFields) => Promise<any>,\n    auth: any,\n    taskStatuses: any\n}\n\nconst SignInComponent = ({signIn, taskStatuses, auth}: SignInComponentProps) => {\n\n    if (auth) {\n        return <Redirect to={'/admin'}/>\n    }\n    const onSubmit = (user: UserAuthenticationFields) => signIn(user);\n\n    const authStatus = _.get(taskStatuses,`${SIGNIN_USER}.status`);\n    return (\n        <div className={styles.Signin}>\n            <div className={styles.Signin__container}>\n                <div className={styles.Signin__logo}>\n                    <img src={require('../../../../../sources/img/perfect-leo-logo.png')}/>\n                </div>\n                <Form onSubmit={onSubmit}>\n                    {(formApi: FormApi) => (\n                        <div className={styles.Form}>\n                            {authStatus === AsyncActionStatus.FAILED && (\n                                <div className={styles.Form__error}>\n                                    Ошибка авторизации\n                                </div>\n                            )}\n                        <form onSubmit={formApi.submitForm} className={styles.Form__form}>\n                            <div className={styles.Form__group}>\n                                <label className={styles.Form__label}>Логин</label>\n                                <Text className={styles.Form__control}\n                                      name=\"identifier\"\n                                      field=\"identifier\"/>\n                            </div>\n                            <div className={styles.Form__group}>\n                                <label className={styles.Form__label}>Пароль</label>\n                                <Text className={styles.Form__control}\n                                      name=\"password\"\n                                      field=\"password\"\n                                      type=\"password\"/>\n                            </div>\n                            <button className={styles.Form__btn}>Авторизация</button>\n                        </form>\n                        </div>\n                    )}\n                </Form>\n            </div>\n        </div>\n    );\n};\n\nexport default SignInComponent;\n","import * as React from 'react';\nimport {withRouter} from 'react-router';\nimport {connect} from 'react-redux';\nimport {signIn} from '../store/actions/actions';\nimport {UserAuthenticationFields} from '../schema/models';\n\nimport SignInComponent from './signin.component';\nimport * as selectors from '../../../../store/reducers';\n\nimport {History} from 'history';\n\ninterface OwnContainerProps {\n    history: History\n}\nconst mapStateToProps = (state: any) => ({\n    taskStatuses: selectors.getAuthAsyncStatuses(state),\n    auth: selectors.getAuth(state)\n});\n\nconst mapDispatchToProps = (dispatch: any, ownProps: OwnContainerProps) => ({\n    signIn: (user: UserAuthenticationFields) =>\n        dispatch(signIn(user))\n});\n\nexport default withRouter<any>(connect(mapStateToProps, mapDispatchToProps)(SignInComponent));\n\n"],"sourceRoot":""}